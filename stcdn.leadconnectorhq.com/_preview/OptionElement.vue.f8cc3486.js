import{s as E}from"./vue-multiselect.esm.20d14854.js";import{o as F}from"./index.35670e06.js";import{S}from"./ShortLabel.dcf5c539.js";import{d as x,r as C,c as d,a as o,b as r,f as a,i as s,Q as O,t as f,e as T,l as B,h as N,p as U,n as q}from"./entry.0e8f1b40.js";const w=["innerHTML"],j={key:1,class:"label-alignment"},M={key:0},H={class:"flex-col"},I={key:2,id:"error-container",class:"error"},Q=x({__name:"OptionElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},formFieldsValue:{type:Object},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","handleFieldLogicChange"],setup(e,{expose:V,emit:g}){const t=e,p=C(),m=d(()=>t.kind=="survey"),b=d(()=>t.errors[t.item.tag]),u=d(()=>t.item.type==="single_options"),y=d(()=>t.item.type==="multiple_options"),L=(l,i)=>{p.value=l,m.value&&u.value&&g("handleFieldLogicChange",{...i,selectedOption:l})},k=()=>{var n,h,v;if(m.value)return;const l=p.value;let i;u.value?i=F(l):y.value&&(i=!((v=(h=t.formFieldsValue)==null?void 0:h[(n=t.item)==null?void 0:n.tag])!=null&&v.length)),t.item.required&&i?c(t.item.tag,`${t.item.label} is required`):c(t.item.tag,null),!t.item.dataType==="MULTIPLE_OPTIONS"&&t.formFieldsValue[t.item.tag]&&!t.item.picklistOptions.includes(t.formFieldsValue[t.item.tag])&&c(t.item.tag,`${t.item.label} having invalid value`)},c=(l,i)=>{g("addOrUpdateError",{tag:l,error:i})};return V({validate:k,item:t.item}),(l,i)=>(o(),r("div",{class:q(["form-builder--item field-container",{"d-none":e.item.hidden,"form-builder--item-input":a(m)}])},[a(m)&&e.item.description!==void 0?(o(),r("label",{key:0,innerHTML:e.item.description,class:"item-description"},null,8,w)):s("",!0),e.formLabelVisible?(o(),r("label",j,[O(f(e.item.label)+" ",1),e.item.required?(o(),r("span",M,"*")):s("",!0)])):s("",!0),T("div",H,[B(a(E),{modelValue:e.formFieldsValue[e.item.tag],"onUpdate:modelValue":i[0]||(i[0]=n=>e.formFieldsValue[e.item.tag]=n),placeholder:!e.formLabelVisible&&e.item.required?e.item.placeholder+"*":e.item.placeholder,name:e.item.tag,options:e.item.picklistOptions,allowEmpty:!a(u),multiple:!!a(y),"show-labels":!1,closeOnSelect:!0,class:"multi_select_form",onSelect:i[1]||(i[1]=n=>{L(n,e.item)})},null,8,["modelValue","placeholder","name","options","allowEmpty","multiple"]),e.item.shortLabel?(o(),N(S,{key:0},{default:U(()=>[O(f(e.item.shortLabel),1)]),_:1})):s("",!0)]),a(b)?(o(),r("div",I,f(a(b)),1)):s("",!0)],2))}});export{Q as _};
